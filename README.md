# MAV-tg-crm ü§ñ

#### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç–µ–∫:


- üêç Python3.12
- üêç FastAPI
- üêç SQLAlchemy 2
- üêç Dishka
- üêç Adaptix
- üêç Alembic
- üóÉ PostgreSQL
- üê≥ Docker + docker-compose
- ‚öôÔ∏è uv


---

# üìó 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

## –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ direnv —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ï—Å–ª–∏ –Ω–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ:

```bash
brew install direnv # –î–ª—è macOS
sudo apt install direnv # –î–ª—è Ubuntu/Debian
sudo pacman -S direnv # –¥–ª—è Arch
```

## –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
direnv allow .
```

[–•—É–∫–∏ –¥–ª—è direnv](https://direnv.net/docs/hook.html)

## –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ —Ä–∞–±–æ—á–∏–π –∫–æ–Ω—Ñ–∏–≥ –∏ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–º–∏:

```bash
cp infra/example.config.toml infra/config.toml
```

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```bash
uv venv
```

- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
uv sync
```
# üìó 2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

## 2.1. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –¥–æ–∫–µ—Ä–∞

- –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
make compose
```

- –ó–∞–ø—É—Å–∫ —Å –ª–æ–≥–∞–º–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±–µ–∑ –±–∏–ª–¥–∞ (Docker version >2.22.0 –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å python –∫–æ–¥ –≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ä–µ–∂–∏–º–∞)
```bash
make watch
```

- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
make down
```

# üìó 3. –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º

## 3.1. –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ;
```bash
uv venv
```

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏;
```bash
uv sync
```

- –°—Ç–∞–≤–∏–º pre-commit –¥–ª—è –ª–∏–Ω—Ç–∞ –∫–æ–¥–∞;
```bash
uv run pre-commit install
```

## 3.2 –õ–∏–Ω—Ç–µ—Ä—ã

–ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä –ø–æ –ø—Ä–æ–µ–∫—Ç—É:
```bash
make lint
```

## 3.2. –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

- –ù–∞–∫–∞—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
```bash
make upgrade
```

- –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
```bash
make downgrade
```

- –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```bash
make migration MSG="{name_of_migration}"
```


created by MAV team üíô
